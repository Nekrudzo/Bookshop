(()=>{"use strict";const e=document.getElementById("point-list"),t=document.getElementById("slide-img-desktop"),n=document.querySelectorAll(".header__list a"),o=document.querySelectorAll("#nav a");document.getElementById("btn-load"),document.querySelectorAll(".categories__item"),n.forEach((e=>{e.addEventListener("click",(function(){n.forEach((e=>e.classList.remove("active"))),this.classList.add("active")}))})),o.forEach((e=>{e.addEventListener("click",(function(){o.forEach((e=>e.classList.remove("active"))),this.classList.add("active")}))}));const s=[{slideImgDesktop:"../Bookshop/src/images/slider/BlackFridaySale.png"},{slideImgDesktop:"../Bookshop/src/images/slider/OurCozyBooks.png"},{slideImgDesktop:"../Bookshop/src/images/slider/TopTenBooks.png"}];let i=0;const c=function(n){t.src=s[n].slideImgDesktop,e.children[i].children[0].src="../Bookshop/src/images/icons/icon_point_no-active.svg",e.children[n].children[0].src="../Bookshop/src/images/icons/icon_point_active.svg",i=n};e.addEventListener("click",(function(t){!function(e,t){let n=Array.from(t.children).findIndex((t=>t.children[0]===e.target));-1!==n&&n!==i&&c(n)}(t,e)})),setInterval((()=>{c((i+1)%s.length)}),5e3);const a=document.getElementById("books-list"),l=document.getElementById("btn-load");let r=0;async function d(){const e=await async function(){const e=await fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:programming&startIndex=${r}&maxResults=6`);return(await e.json()).items||[]}();0!==e.length?(e.forEach((e=>{const t=function(e){const t=document.createElement("div");t.classList.add("card");const n=e.volumeInfo.title,o=e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"Не указано",s=e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"https://via.placeholder.com/150",i=e.volumeInfo.averageRating,c=e.volumeInfo.ratingsCount,a=e.volumeInfo.description||"Нет описания",l="FOR_SALE"===e.saleInfo.saleability&&e.saleInfo.listPrice?`${e.saleInfo.listPrice.amount} ${e.saleInfo.listPrice.currencyCode}`:"";return t.innerHTML=`\n        <img src="${s}" alt="${n}" />\n        <h3>${n}</h3>\n        <p>${o}</p>\n        ${i?`<p class="rating">${"★".repeat(Math.round(i))} (${c||0})</p>`:""}\n        <p class="description">${a}</p>\n        ${l?`<p class="price">${l}</p>`:""}\n    `,t}(e);a.appendChild(t)})),r+=6):l.style.display="none"}l.addEventListener("click",d),d()})();