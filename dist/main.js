(()=>{"use strict";const e=document.getElementById("point-list"),t=document.getElementById("slide-img-desktop"),n=document.querySelectorAll(".header__list a");n.forEach((e=>{e.addEventListener("click",(function(){n.forEach((e=>e.classList.remove("active"))),this.classList.add("active")}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".categories__item");e.forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault(),e.forEach((e=>e.classList.remove("active"))),this.classList.add("active")}))}))}));const s=[{slideImgDesktop:"../Bookshop/src/images/slider/BlackFridaySale.png"},{slideImgDesktop:"../Bookshop/src/images/slider/OurCozyBooks.png"},{slideImgDesktop:"../Bookshop/src/images/slider/TopTenBooks.png"}];let i=0;const o=function(n){t.src=s[n].slideImgDesktop,e.children[i].children[0].src="../Bookshop/src/images/icons/icon_point_no-active.svg",e.children[n].children[0].src="../Bookshop/src/images/icons/icon_point_active.svg",i=n};e.addEventListener("click",(function(t){!function(e,t){let n=Array.from(t.children).findIndex((t=>t.children[0]===e.target));-1!==n&&n!==i&&o(n)}(t,e)})),setInterval((()=>{o((i+1)%s.length)}),5e3);const c=document.getElementById("books-list"),a=document.getElementById("btn-load");let r=0,l=6,d="";function u(){l=window.innerWidth<=768?3:6}async function m(){const e=await async function(e){const t=await fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${e}&startIndex=${r}&maxResults=${l}`);return(await t.json()).items||[]}(d);0!==e.length?(e.forEach((e=>{const t=function(e){const t=document.createElement("div");t.classList.add("card");const n=e.volumeInfo.title,s=e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"Не указано",i=e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"../Bookshop/src/images/noImage.jpg",o=e.volumeInfo.averageRating,c=e.volumeInfo.ratingsCount,a=e.volumeInfo.description||"Нет описания",r="FOR_SALE"===e.saleInfo.saleability&&e.saleInfo.listPrice?`${e.saleInfo.listPrice.amount} ${e.saleInfo.listPrice.currencyCode}`:"";return t.innerHTML=`\n        <img src="${i}" alt="${n}" />\n        <div class="card-content">\n        <p>${s}</p>\n        <h3>${n}</h3>\n        ${o?`<p class="rating">${"★".repeat(Math.round(o))} (${c||0})</p>`:""}\n        <p class="description">${a}</p>\n        ${r?`<p class="price">${r}</p>`:""}\n        <button class="buy" id="buy" data-in-cart="false">Buy now</button>\n        </div>\n    `,t}(e);c.appendChild(t)})),r+=l):a.style.display="none"}window.addEventListener("resize",u),u(),a.addEventListener("click",m),document.querySelectorAll(".categories__item").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),d=this.dataset.category,c.innerHTML="",r=0,m(),document.querySelector(".categories__item.active").classList.remove("active"),this.classList.add("active")}))})),d="architecture",m();let g=0;document.addEventListener("click",(function(e){if(e.target.classList.contains("buy")){const t=e.target;"true"===t.getAttribute("data-in-cart")?(t.innerText="Buy now",t.setAttribute("data-in-cart","false"),g-=1):(t.innerText="In the list",t.setAttribute("data-in-cart","true"),g+=1),function(){const e=document.getElementById("carts-count");g>0?e.innerText=g:(e.innerText="",e.classList.add("circle"))}()}}))})();