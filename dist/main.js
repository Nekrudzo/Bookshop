(()=>{"use strict";const e=document.getElementById("point-list"),t=document.getElementById("slide-img-desktop"),n=document.querySelectorAll(".header__list a");n.forEach((e=>{e.addEventListener("click",(function(){n.forEach((e=>e.classList.remove("active"))),this.classList.add("active")}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".categories__item");e.forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault(),e.forEach((e=>e.classList.remove("active"))),this.classList.add("active")}))}))}));const o=[{slideImgDesktop:"../Bookshop/src/images/slider/BlackFridaySale.png"},{slideImgDesktop:"../Bookshop/src/images/slider/OurCozyBooks.png"},{slideImgDesktop:"../Bookshop/src/images/slider/TopTenBooks.png"}];let s=0;const i=function(n){t.src=o[n].slideImgDesktop,e.children[s].children[0].src="../Bookshop/src/images/icons/icon_point_no-active.svg",e.children[n].children[0].src="../Bookshop/src/images/icons/icon_point_active.svg",s=n};e.addEventListener("click",(function(t){!function(e,t){let n=Array.from(t.children).findIndex((t=>t.children[0]===e.target));-1!==n&&n!==s&&i(n)}(t,e)})),setInterval((()=>{i((s+1)%o.length)}),5e3);const c=document.getElementById("books-list"),a=document.getElementById("btn-load");let l=0,r="";async function d(){const e=await async function(e){const t=await fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${e}&startIndex=${l}&maxResults=6`);return(await t.json()).items||[]}(r);0!==e.length?(e.forEach((e=>{const t=function(e){const t=document.createElement("div");t.classList.add("card");const n=e.volumeInfo.title,o=e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"Не указано",s=e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"https://via.placeholder.com/150",i=e.volumeInfo.averageRating,c=e.volumeInfo.ratingsCount,a=e.volumeInfo.description||"Нет описания",l="FOR_SALE"===e.saleInfo.saleability&&e.saleInfo.listPrice?`${e.saleInfo.listPrice.amount} ${e.saleInfo.listPrice.currencyCode}`:"";return t.innerHTML=`\n        <img src="${s}" alt="${n}" />\n        <h3>${n}</h3>\n        <p>${o}</p>\n        ${i?`<p class="rating">${"★".repeat(Math.round(i))} (${c||0})</p>`:""}\n        <p class="description">${a}</p>\n        ${l?`<p class="price">${l}</p>`:""}\n    `,t}(e);c.appendChild(t)})),l+=6):a.style.display="none"}a.addEventListener("click",d),document.querySelectorAll(".categories__item").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),r=this.dataset.category,c.innerHTML="",l=0,d(),document.querySelector(".categories__item.active").classList.remove("active"),this.classList.add("active")}))})),r="architecture",d()})();